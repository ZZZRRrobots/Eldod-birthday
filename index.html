<!doctype html>

<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
<title>ðŸŽ‚ Happy Birthday Eldod â€” Sweet 16</title><!-- Three.js --><script src="https://unpkg.com/three@0.158.0/build/three.min.js"></script><style>
*{margin:0;padding:0;box-sizing:border-box;font-family:system-ui,Segoe UI,Arial}
body{
  background:radial-gradient(circle at top,#0b1a24,#000);
  overflow:hidden;color:white
}
#ui{
  position:absolute;inset:0;display:flex;flex-direction:column;
  align-items:center;justify-content:center;text-align:center;z-index:10
}
button{
  padding:16px 40px;font-size:22px;font-weight:800;
  border:none;border-radius:40px;cursor:pointer;
  background:linear-gradient(135deg,#00eaff,#0072ff);
  color:black
}
#title{font-size:42px;margin-bottom:10px}
#subtitle{font-size:26px;color:#00eaff}
canvas{display:block}

#hint{
  position:absolute;bottom:20px;width:100%;text-align:center;
  opacity:.7;font-size:16px;display:none
}
</style></head>
<body><div id="ui">
  <div id="title">ðŸŽ‰ Ready Eldod?</div>
  <div id="subtitle">Tap START to build your cake ðŸŽ‚</div>
  <br>
  <button id="start">START</button>
</div>
<div id="hint">ðŸ‘‰ Drag the torch to light the candles</div><script>
// Scene
const scene = new THREE.Scene();
scene.fog = new THREE.Fog(0x000000,5,20);

const camera = new THREE.PerspectiveCamera(45,innerWidth/innerHeight,0.1,100);
camera.position.set(0,4,9);

const renderer = new THREE.WebGLRenderer({antialias:true,alpha:true});
renderer.setSize(innerWidth,innerHeight);
document.body.appendChild(renderer.domElement);

// Lights
scene.add(new THREE.AmbientLight(0xffffff,.4));
const light = new THREE.PointLight(0x00eaff,1.2);
light.position.set(2,6,3);
scene.add(light);

// Cake Group
const cake = new THREE.Group();
scene.add(cake);

function layer(y,color){
  const g = new THREE.CylinderGeometry(2.2,2.2,1,64);
  const m = new THREE.MeshStandardMaterial({color});
  const mesh = new THREE.Mesh(g,m);
  mesh.position.y = y+6;
  cake.add(mesh);
  return mesh;
}

const bottom = layer(0,0xc68642);
const mid = layer(1,0xd9a066);
const top = layer(2,0xf2c38b);

// Frosting
const frost = new THREE.Mesh(
  new THREE.CylinderGeometry(2.3,2.3,.4,64),
  new THREE.MeshStandardMaterial({color:0xffffff})
);
frost.position.y = 3.2+6;
cake.add(frost);

// Text engrave
function text3D(txt,y){
  const canvas=document.createElement('canvas');
  canvas.width=1024;canvas.height=256;
  const c=canvas.getContext('2d');
  c.fillStyle='#000';c.font='bold 120px Arial';
  c.textAlign='center';c.textBaseline='middle';
  c.fillText(txt,512,128);
  const tex=new THREE.CanvasTexture(canvas);
  const mat=new THREE.MeshStandardMaterial({map:tex,transparent:true});
  const geo=new THREE.PlaneGeometry(3,0.8);
  const mesh=new THREE.Mesh(geo,mat);
  mesh.position.set(0,y,2.21);
  cake.add(mesh);
}

text3D('E L D O D',1.2);
text3D('SWEET 16',2.3);

// Candles
const flames=[];
for(let i=-1.2;i<=1.2;i+=0.6){
  const candle=new THREE.Mesh(
    new THREE.CylinderGeometry(.08,.08,.6,16),
    new THREE.MeshStandardMaterial({color:0xff5555})
  );
  candle.position.set(i,3.8+6,0);
  cake.add(candle);

  const flame=new THREE.Mesh(
    new THREE.SphereGeometry(.12,16,16),
    new THREE.MeshStandardMaterial({color:0xffaa00,emissive:0xffaa00})
  );
  flame.position.set(i,4.2+6,0);
  flame.visible=false;
  cake.add(flame);
  flames.push(flame);
}

// Torch
const torch=new THREE.Mesh(
  new THREE.CylinderGeometry(.15,.15,1.2,16),
  new THREE.MeshStandardMaterial({color:0x888888})
);
torch.position.set(-3,2,0);
scene.add(torch);

// Animation states
let build=false;
let pointer={x:0,y:0};

function animate(){
  requestAnimationFrame(animate);

  if(build && cake.position.y>0){
    cake.position.y-=0.05;
  }

  torch.position.x += (pointer.x*5 - torch.position.x)*0.2;
  torch.position.y += (pointer.y*5 - torch.position.y)*0.2;

  flames.forEach(f=>{
    if(f.position.distanceTo(torch.position)<0.5) f.visible=true;
  });

  renderer.render(scene,camera);
}
animate();

// Controls (touch + mouse)
function move(e){
  const x=e.touches?e.touches[0].clientX:e.clientX;
  const y=e.touches?e.touches[0].clientY:e.clientY;
  pointer.x=(x/innerWidth-.5)*2;
  pointer.y=-(y/innerHeight-.5)*2+2;
}
window.addEventListener('mousemove',move);
window.addEventListener('touchmove',move,{passive:false});

// ðŸŽµ Birthday Music + Beat Sync
let audio, analyser, data;

function startMusic(){
  audio = new Audio('https://cdn.pixabay.com/audio/2023/03/28/audio_5c1c2b9b6a.mp3');
  audio.loop = true;
  audio.volume = 0.7;
  audio.play();

  const ctx = new (window.AudioContext||window.webkitAudioContext)();
  const src = ctx.createMediaElementSource(audio);
  analyser = ctx.createAnalyser();
  analyser.fftSize = 64;
  data = new Uint8Array(analyser.frequencyBinCount);
  src.connect(analyser);
  analyser.connect(ctx.destination);
}

// Start
start.onclick=()=>{
  document.getElementById('ui').style.display='none';
  document.getElementById('hint').style.display='block';
  cake.position.y=6;
  build=true;
  startMusic();
};

onresize=()=>{
  camera.aspect=innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
};
</script></body>
</html>
